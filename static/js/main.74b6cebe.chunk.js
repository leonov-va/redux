(this["webpackJsonpredux-example"]=this["webpackJsonpredux-example"]||[]).push([[0],{40:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),c=r(13),a=r.n(c),o=r(6),i=(r(40),r(9)),u=r.n(i),d=r(14),l=r(19),p=r(15),j=r(20),b=Object(j.createApi)({reducerPath:"postAPI",baseQuery:Object(j.fetchBaseQuery)({baseUrl:"http://localhost:5000"}),tagTypes:["Post"],endpoints:function(e){return{fetchAllPosts:e.query({query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return{url:"/posts",params:{_limit:e}}},providesTags:function(e){return["Post"]}}),createPost:e.mutation({query:function(e){return{url:"/posts",method:"POST",body:e}},invalidatesTags:["Post"]}),updatePost:e.mutation({query:function(e){return{url:"/posts/".concat(e.id),method:"PUT",body:e}},invalidatesTags:["Post"]}),deletePost:e.mutation({query:function(e){return{url:"/posts/".concat(e.id),method:"DELETE"}},invalidatesTags:["Post"]})}}}),h=r(21),m=r(2),O=s.a.memo((function(e){var t=e.post,r=e.remove,n=e.update;return Object(m.jsxs)("article",{className:"post",onClick:function(e){e.stopPropagation();var r=window.prompt("Enter name: ","")||"";n(Object(h.a)(Object(h.a)({},t),{},{title:r}))},children:[Object(m.jsx)("span",{className:"post__id",children:t.id}),Object(m.jsx)("h2",{className:"post__name",children:t.title}),Object(m.jsx)("p",{className:"post__text",children:t.body}),Object(m.jsx)("button",{className:"post__delete",type:"button",onClick:function(e){e.stopPropagation(),r(t)},children:"Delete"})]})})),f=function(e){var t=b.useFetchAllPostsQuery(100),r=t.data,n=t.isLoading,s=t.error,c=b.useCreatePostMutation(),a=Object(p.a)(c,2),o=a[0],i=a[1],j=(i.error,i.isLoading,b.useUpdatePostMutation()),h=Object(p.a)(j,2),f=h[0];Object(l.a)(h[1]);var x=b.useDeletePostMutation(),v=Object(p.a)(x,2),y=v[0];Object(l.a)(v[1]);var g=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.prompt("Enter name: ",""),e.next=3,o({title:t,body:t});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){y(e)},w=function(e){f(e)};return Object(m.jsxs)("div",{className:"posts",children:[Object(m.jsx)("button",{type:"button",onClick:g,children:"Add new post"}),n&&Object(m.jsx)("h1",{children:"Loading...."}),s&&Object(m.jsx)("h1",{style:{color:"red"},children:s}),null===r||void 0===r?void 0:r.map((function(e){return Object(m.jsx)(O,{remove:P,update:w,post:e},e.id)}))]})},x=o.useSelector,v=r(0),y=r(31),g=r.n(y),P=Object(v.createAsyncThunk)("user/fetchAll",function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://jsonplaceholder.typicode.com/users");case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r.rejectWithValue("Failed to load users!"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}());var w,N=function(){var e=Object(o.useDispatch)(),t=x((function(e){return e.userReducer})),r=t.users,s=t.isLoading,c=t.error;return Object(n.useEffect)((function(){e(P())}),[]),Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("h1",{children:"Users"}),s&&Object(m.jsx)("h1",{children:"Loading...."}),c&&Object(m.jsx)("h1",{style:{color:"red"},children:c}),Object(m.jsx)("div",{className:"users",children:JSON.parse(JSON.stringify(r,null,2)).map((function(e){return Object(m.jsxs)("article",{className:"user",children:[Object(m.jsx)("h2",{className:"user__name",children:e.name}),Object(m.jsx)("a",{className:"user__email",href:"mailto:".concat(e.email),children:e.email})]},e.id)}))}),Object(m.jsx)("h1",{children:"Posts"}),Object(m.jsx)(f,{})]})},_=(r(61),r(8)),L=r(5),T=Object(v.createSlice)({name:"user",initialState:{users:[],isLoading:!1,error:""},reducers:{},extraReducers:(w={},Object(_.a)(w,P.fulfilled.type,(function(e,t){e.isLoading=!1,e.error="",e.users=t.payload})),Object(_.a)(w,P.pending.type,(function(e){e.isLoading=!0})),Object(_.a)(w,P.rejected.type,(function(e,t){e.isLoading=!1,e.error=t.payload})),w)}).reducer,k=Object(L.d)(Object(_.a)({userReducer:T},b.reducerPath,b.reducer)),A=Object(v.configureStore)({reducer:k,middleware:function(e){return e().concat(b.middleware)}});a.a.render(Object(m.jsx)(o.Provider,{store:A,children:Object(m.jsx)(N,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.74b6cebe.chunk.js.map